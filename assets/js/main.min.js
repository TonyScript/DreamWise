/* Minified JavaScript - Dream Interpretation Platform */
document.addEventListener("DOMContentLoaded",function(){console.log("Dream Interpretation Platform initialized");initializeAnimations();initializeScrollEffects();initializeResponsiveFeatures();initializeExpertCarousel();initializeRelatedDreams();initializePageSpecificFeatures();initializeDreamCardAnimations()});function initializeAnimations(){const floatingElements=document.querySelectorAll(".floating");floatingElements.forEach((element,index)=>{element.style.animationDelay=`${index*2}s`;const icon=element.querySelector("i");if(icon){if(icon.classList.contains("fa-star")){element.classList.add(index%2===0?"hero-float-star-1":"hero-float-star-2")}else if(icon.classList.contains("fa-moon")){element.classList.add("hero-float-moon")}else if(icon.classList.contains("fa-circle")||icon.classList.contains("fa-adjust")){element.classList.add("hero-float-orb")}}});initializePageTransitions();initializeScrollAnimations();initializeEnhancedHoverEffects()}function initializeScrollEffects(){const anchorLinks=document.querySelectorAll('a[href^="#"]');anchorLinks.forEach(link=>{link.addEventListener("click",function(e){e.preventDefault();const target=document.querySelector(this.getAttribute("href"));if(target){target.scrollIntoView({behavior:"smooth",block:"start"})}})})}function initializeResponsiveFeatures(){const mobileMenuToggle=document.querySelector(".mobile-menu-toggle");const mobileMenu=document.querySelector(".mobile-menu");if(mobileMenuToggle&&mobileMenu){mobileMenuToggle.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();toggleMobileMenu()});document.addEventListener("click",function(e){if(!e.target.closest("nav")&&!mobileMenu.classList.contains("hidden")){closeMobileMenu()}});document.addEventListener("keydown",function(e){if(e.key==="Escape"&&!mobileMenu.classList.contains("hidden")){closeMobileMenu()}});const mobileMenuLinks=mobileMenu.querySelectorAll("a");mobileMenuLinks.forEach(link=>{link.addEventListener("click",function(){setTimeout(()=>closeMobileMenu(),300)})})}let resizeTimeout;window.addEventListener("resize",function(){clearTimeout(resizeTimeout);resizeTimeout=setTimeout(()=>{handleResponsiveLayout();handleOrientationChange()},150)});window.addEventListener("orientationchange",function(){setTimeout(()=>{handleOrientationChange();handleResponsiveLayout()},100)});initializeTouchInteractions();initializeViewportFix();initializePerformanceOptimizations()}function handleResponsiveLayout(){const screenWidth=window.innerWidth;if(screenWidth<768){document.body.classList.add("mobile-view")}else{document.body.classList.remove("mobile-view")}}function initializeExpertCarousel(){const carousel=document.getElementById("expertCarousel");const prevButton=document.querySelector(".expert-carousel-prev");const nextButton=document.querySelector(".expert-carousel-next");const indicators=document.querySelectorAll(".carousel-indicator");if(!carousel)return;let currentSlide=0;let isTransitioning=false;let touchStartX=0;let touchEndX=0;let autoSlideInterval;function getSlidesPerView(){const screenWidth=window.innerWidth;if(screenWidth>=1024)return 3;if(screenWidth>=768)return 2;return 1}function getTotalSlides(){const expertCards=carousel.querySelectorAll(".expert-card");const slidesPerView=getSlidesPerView();return Math.max(0,expertCards.length-slidesPerView+1)}function updateCarousel(slideIndex,smooth=true){if(isTransitioning)return;const totalSlides=getTotalSlides();currentSlide=Math.max(0,Math.min(slideIndex,totalSlides-1));const slideWidth=100/getSlidesPerView();const translateX=-(currentSlide*slideWidth);if(smooth){isTransitioning=true;carousel.style.transition="transform 0.5s ease-in-out";setTimeout(()=>{isTransitioning=false},500)}else{carousel.style.transition="none"}carousel.style.transform=`translateX(${translateX}%)`;updateIndicators();updateNavigationButtons()}function updateIndicators(){const totalSlides=getTotalSlides();const indicatorsToShow=Math.min(4,totalSlides);indicators.forEach((indicator,index)=>{if(index<indicatorsToShow){indicator.style.display="block";indicator.classList.toggle("active",index===currentSlide)}else{indicator.style.display="none"}})}function updateNavigationButtons(){const totalSlides=getTotalSlides();if(prevButton){prevButton.style.opacity=currentSlide===0?"0.3":"0.8";prevButton.style.pointerEvents=currentSlide===0?"none":"auto"}if(nextButton){nextButton.style.opacity=currentSlide>=totalSlides-1?"0.3":"0.8";nextButton.style.pointerEvents=currentSlide>=totalSlides-1?"none":"auto"}}function prevSlide(){if(currentSlide>0){updateCarousel(currentSlide-1)}}function nextSlide(){const totalSlides=getTotalSlides();if(currentSlide<totalSlides-1){updateCarousel(currentSlide+1)}}function startAutoSlide(){stopAutoSlide();autoSlideInterval=setInterval(()=>{const totalSlides=getTotalSlides();if(currentSlide>=totalSlides-1){updateCarousel(0)}else{nextSlide()}},5000)}function stopAutoSlide(){if(autoSlideInterval){clearInterval(autoSlideInterval);autoSlideInterval=null}}function handleTouchStart(e){touchStartX=e.touches[0].clientX;stopAutoSlide()}function handleTouchMove(e){if(Math.abs(e.touches[0].clientX-touchStartX)>10){e.preventDefault()}}function handleTouchEnd(e){touchEndX=e.changedTouches[0].clientX;handleSwipe();startAutoSlide()}function handleSwipe(){const swipeThreshold=50;const swipeDistance=touchStartX-touchEndX;if(Math.abs(swipeDistance)>swipeThreshold){if(swipeDistance>0){nextSlide()}else{prevSlide()}}}if(prevButton){prevButton.addEventListener("click",prevSlide)}if(nextButton){nextButton.addEventListener("click",nextSlide)}indicators.forEach((indicator,index)=>{indicator.addEventListener("click",()=>{updateCarousel(index);stopAutoSlide();startAutoSlide()})});carousel.addEventListener("touchstart",handleTouchStart,{passive:false});carousel.addEventListener("touchmove",handleTouchMove,{passive:false});carousel.addEventListener("touchend",handleTouchEnd,{passive:true});let isDragging=false;let dragStartX=0;carousel.addEventListener("mousedown",(e)=>{isDragging=true;dragStartX=e.clientX;carousel.style.cursor="grabbing";stopAutoSlide();e.preventDefault()});carousel.addEventListener("mousemove",(e)=>{if(!isDragging)return;e.preventDefault()});carousel.addEventListener("mouseup",(e)=>{if(!isDragging)return;isDragging=false;carousel.style.cursor="grab";const dragDistance=dragStartX-e.clientX;const dragThreshold=50;if(Math.abs(dragDistance)>dragThreshold){if(dragDistance>0){nextSlide()}else{prevSlide()}}startAutoSlide()});carousel.addEventListener("mouseleave",()=>{if(isDragging){isDragging=false;carousel.style.cursor="grab";startAutoSlide()}});const carouselContainer=carousel.closest(".expert-carousel-container");if(carouselContainer){carouselContainer.addEventListener("mouseenter",stopAutoSlide);carouselContainer.addEventListener("mouseleave",startAutoSlide)}function handleCarouselResize(){updateCarousel(currentSlide,false)}window.addEventListener("resize",handleCarouselResize);updateCarousel(0,false);startAutoSlide();carousel.style.cursor="grab"}function initializePageSpecificFeatures(){const currentPath=window.location.pathname;const currentPage=currentPath.split("/").pop()||"index.html";console.log(`Initializing features for page: ${currentPage}`);switch(currentPage){case"index.html":case"":case"/":initializeHomePage();break;case"browse.html":initializeBrowsePage();break;case"categories.html":initializeCategoriesPage();break;case"insights.html":initializeInsightsPage();break;default:if(currentPath.includes("/dream/")||currentPage.includes("dream")){initializeDreamPage()}break}initializeCommonFeatures()}function initializeHomePage(){console.log("Initializing homepage features");addHoverEffects(".nav-card");addHoverEffects(".popular-dream-card");initializeHeroAnimations()}function initializeCategoriesPage(){console.log("Initializing categories page features");addHoverEffects(".category-card")}function initializeDreamPage(){console.log("Initializing dream interpretation page features");addHoverEffects(".related-dream-card")}function initializeHeroAnimations(){const heroElements=document.querySelectorAll(".hero-animate");heroElements.forEach((element,index)=>{element.style.opacity="0";element.style.transform="translateY(30px)";element.style.transition="all 0.8s ease";setTimeout(()=>{element.style.opacity="1";element.style.transform="translateY(0)"},index*200)})}function initializeCommonFeatures(){addHoverEffects(".glass-card");addHoverEffects(".hover-scale");initializeLoadingStates();initializeAccessibilityFeatures()}function initializeLoadingStates(){const dynamicElements=document.querySelectorAll("[data-loading]");dynamicElements.forEach(element=>{element.classList.add("loading");setTimeout(()=>{element.classList.remove("loading")},1000)})}function initializeAccessibilityFeatures(){const focusableElements=document.querySelectorAll('button, a, input, select, textarea, [tabindex]:not([tabindex="-1"])');focusableElements.forEach(element=>{element.addEventListener("focus",function(){this.classList.add("keyboard-focus")});element.addEventListener("blur",function(){this.classList.remove("keyboard-focus")});element.addEventListener("mousedown",function(){this.classList.remove("keyboard-focus")})});const skipLink=document.querySelector(".skip-to-content");if(skipLink){skipLink.addEventListener("click",function(e){e.preventDefault();const target=document.querySelector(this.getAttribute("href"));if(target){target.focus();target.scrollIntoView({behavior:"smooth"})}})}}function addHoverEffects(selector){const elements=document.querySelectorAll(selector);elements.forEach(element=>{element.addEventListener("mouseenter",function(){this.classList.add("hover-active")});element.addEventListener("mouseleave",function(){this.classList.remove("hover-active")})})}function initializeBrowsePage(){console.log("Initializing browse page functionality");initializeAlphabetNavigation();initializeLetterObserver();initializeLetterScrolling();initializeBrowsePageSearch()}function initializeAlphabetNavigation(){const letterButtons=document.querySelectorAll(".letter-btn");const letterSections=document.querySelectorAll(".letter-section");if(!letterButtons.length||!letterSections.length)return;letterButtons.forEach(button=>{button.addEventListener("click",function(){const letter=this.getAttribute("data-letter");const targetSection=document.getElementById(`letter-${letter}`);if(targetSection){updateActiveLetterButton(letter);targetSection.scrollIntoView({behavior:"smooth",block:"start"})}})})}function updateActiveLetterButton(activeLetter){const letterButtons=document.querySelectorAll(".letter-btn");letterButtons.forEach(button=>{const letter=button.getAttribute("data-letter");if(letter===activeLetter){button.classList.add("active")}else{button.classList.remove("active")}})}function initializeLetterObserver(){const letterSections=document.querySelectorAll(".letter-section");if(!letterSections.length)return;const observerOptions={root:null,rootMargin:"-120px 0px -50% 0px",threshold:0.1};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){const sectionId=entry.target.id;const letter=sectionId.replace("letter-","");updateActiveLetterButton(letter)}})},observerOptions);letterSections.forEach(section=>{observer.observe(section)})}function initializeLetterScrolling(){document.addEventListener("keydown",function(e){const letterButtons=document.querySelectorAll(".letter-btn");const activeButton=document.querySelector(".letter-btn.active");if(!activeButton||!letterButtons.length)return;let targetButton=null;const currentIndex=Array.from(letterButtons).indexOf(activeButton);switch(e.key){case"ArrowLeft":e.preventDefault();targetButton=letterButtons[Math.max(0,currentIndex-1)];break;case"ArrowRight":e.preventDefault();targetButton=letterButtons[Math.min(letterButtons.length-1,currentIndex+1)];break;case"Home":e.preventDefault();targetButton=letterButtons[0];break;case"End":e.preventDefault();targetButton=letterButtons[letterButtons.length-1];break}if(targetButton){targetButton.click();targetButton.focus()}});const alphabetNav=document.querySelector(".alphabet-nav");if(alphabetNav){let startX=0;let scrollLeft=0;alphabetNav.addEventListener("touchstart",function(e){startX=e.touches[0].pageX-alphabetNav.offsetLeft;scrollLeft=alphabetNav.scrollLeft});alphabetNav.addEventListener("touchmove",function(e){e.preventDefault();const x=e.touches[0].pageX-alphabetNav.offsetLeft;const walk=(x-startX)*2;alphabetNav.scrollLeft=scrollLeft-walk})}}function initializeBrowsePageSearch(){createBrowseSearchInterface();const searchInput=document.getElementById("browse-search");const dreamCards=document.querySelectorAll(".dream-symbol-card");const clearButton=document.getElementById("browse-search-clear");if(!searchInput||!dreamCards.length)return;searchInput.addEventListener("input",function(){const searchTerm=this.value.toLowerCase().trim();if(clearButton){clearButton.style.display=searchTerm?"block":"none"}dreamCards.forEach(card=>{const symbolName=card.querySelector("h3, .symbol-name")?.textContent.toLowerCase()||"";const symbolDescription=card.querySelector("p, .symbol-description")?.textContent.toLowerCase()||"";const matches=symbolName.includes(searchTerm)||symbolDescription.includes(searchTerm);if(matches||searchTerm===""){card.style.display="block";card.style.opacity="1";card.style.transform="scale(1)"}else{card.style.display="none";card.style.opacity="0";card.style.transform="scale(0.8)"}});updateLetterSectionVisibility();updateSearchResultsCount(searchTerm)});if(clearButton){clearButton.addEventListener("click",function(){searchInput.value="";searchInput.dispatchEvent(new Event("input"));searchInput.focus()})}document.addEventListener("keydown",function(e){if((e.ctrlKey||e.metaKey)&&e.key==="f"){e.preventDefault();searchInput.focus()}if(e.key==="Escape"&&document.activeElement===searchInput){searchInput.value="";searchInput.dispatchEvent(new Event("input"))}})}function createBrowseSearchInterface(){if(document.getElementById("browse-search"))return;const heroSection=document.querySelector(".hero-section");const alphabetNav=document.querySelector(".alphabet-nav")?.parentElement;if(!heroSection||!alphabetNav)return;const searchSection=document.createElement("div");searchSection.className="search-section py-8 bg-gradient-to-b from-purple-900/50 to-transparent";searchSection.innerHTML=`<div class="container mx-auto px-6"><div class="max-w-2xl mx-auto"><div class="glass-card p-6"><div class="relative"><input type="text" id="browse-search" placeholder="Search dream symbols..." class="w-full bg-white/10 border border-white/20 rounded-xl px-4 py-3 pl-12 pr-12 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-300"><i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i><button id="browse-search-clear" class="absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors duration-300 hidden" aria-label="Clear search"><i class="fas fa-times"></i></button></div><div class="mt-4 text-center"><p class="text-sm text-gray-400" id="search-results-count">Search through our comprehensive dream symbol dictionary</p></div></div></div></div>`;heroSection.parentNode.insertBefore(searchSection,alphabetNav)}function updateSearchResultsCount(searchTerm){const resultsElement=document.getElementById("search-results-count");if(!resultsElement)return;if(!searchTerm){resultsElement.textContent="Search through our comprehensive dream symbol dictionary";return}const visibleCards=document.querySelectorAll('.dream-symbol-card[style*="display: block"], .dream-symbol-card:not([style*="display: none"])');const count=visibleCards.length;if(count===0){resultsElement.innerHTML=`<span class="text-red-400">No symbols found for "${searchTerm}"</span>`}else if(count===1){resultsElement.innerHTML=`<span class="text-green-400">Found 1 symbol for "${searchTerm}"</span>`}else{resultsElement.innerHTML=`<span class="text-green-400">Found ${count} symbols for "${searchTerm}"</span>`}}function initializeDreamSymbolSearch(){initializeBrowsePageSearch()}function updateLetterSectionVisibility(){const letterSections=document.querySelectorAll(".letter-section");letterSections.forEach(section=>{const visibleCards=section.querySelectorAll('.dream-symbol-card[style*="display: block"], .dream-symbol-card:not([style*="display: none"])');if(visibleCards.length===0){section.style.display="none"}else{section.style.display="block"}})}function initializeDreamCardAnimations(){const dreamCards=document.querySelectorAll(".dream-symbol-card");dreamCards.forEach((card,index)=>{card.style.animationDelay=`${index*0.05}s`})}function initializeInsightsPage(){console.log("Initializing insights page");initializeWordCloud();initializeDailyWisdom();initializeWeeklyTimeline();initializeSocialSharing()}function initializeWordCloud(){const wordCloudContainer=document.querySelector(".word-cloud-container");if(!wordCloudContainer)return;const wordCloudItems=wordCloudContainer.querySelectorAll(".word-cloud-item");wordCloudItems.forEach((item,index)=>{item.style.animationDelay=`${index*0.1}s`;item.addEventListener("mouseenter",function(){showPopularityTooltip(this)});item.addEventListener("mouseleave",function(){hidePopularityTooltip()})});wordCloudContainer.classList.add("animate-in")}function showPopularityTooltip(element){const popularity=element.getAttribute("data-popularity");const category=element.getAttribute("data-category");if(!popularity)return;let tooltip=document.getElementById("popularity-tooltip");if(!tooltip){tooltip=document.createElement("div");tooltip.id="popularity-tooltip";tooltip.className="absolute bg-gray-900 text-white px-3 py-2 rounded-lg text-sm pointer-events-none z-50";document.body.appendChild(tooltip)}tooltip.innerHTML=`<div class="tooltip-content"><div>Popularity: ${popularity}%</div><div>Category: ${category}</div></div>`;const rect=element.getBoundingClientRect();tooltip.style.left=rect.left+rect.width/2-tooltip.offsetWidth/2+"px";tooltip.style.top=rect.top-tooltip.offsetHeight-10+"px";tooltip.style.opacity="1";tooltip.style.visibility="visible"}function hidePopularityTooltip(){const tooltip=document.getElementById("popularity-tooltip");if(tooltip){tooltip.style.opacity="0";tooltip.style.visibility="hidden"}}function initializeDailyWisdom(){const dailyWisdomCard=document.querySelector(".daily-wisdom-card");if(dailyWisdomCard){const today=new Date();const dateElement=dailyWisdomCard.querySelector(".wisdom-date");if(dateElement){dateElement.textContent=today.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}}}function initializeWeeklyTimeline(){const timelineItems=document.querySelectorAll(".timeline-item");timelineItems.forEach((item,index)=>{item.style.animationDelay=`${index*0.2}s`;item.classList.add("fade-in-up")})}function initializeSocialSharing(){const shareButtons=document.querySelectorAll(".social-share-btn");shareButtons.forEach(button=>{button.addEventListener("click",function(e){e.preventDefault();const platform=this.getAttribute("data-platform");const url=encodeURIComponent(window.location.href);const title=encodeURIComponent(document.title);let shareUrl="";switch(platform){case"twitter":shareUrl=`https://twitter.com/intent/tweet?url=${url}&text=${title}`;break;case"facebook":shareUrl=`https://www.facebook.com/sharer/sharer.php?u=${url}`;break;case"linkedin":shareUrl=`https://www.linkedin.com/sharing/share-offsite/?url=${url}`;break;case"pinterest":shareUrl=`https://pinterest.com/pin/create/button/?url=${url}&description=${title}`;break}if(shareUrl){window.open(shareUrl,"_blank","width=600,height=400")}})})}function initializeRelatedDreams(){const relatedDreamsContainer=document.querySelector(".related-dreams-scroll");if(!relatedDreamsContainer)return;let isDown=false;let startX;let scrollLeft;relatedDreamsContainer.addEventListener("mousedown",(e)=>{isDown=true;relatedDreamsContainer.classList.add("active");startX=e.pageX-relatedDreamsContainer.offsetLeft;scrollLeft=relatedDreamsContainer.scrollLeft});relatedDreamsContainer.addEventListener("mouseleave",()=>{isDown=false;relatedDreamsContainer.classList.remove("active")});relatedDreamsContainer.addEventListener("mouseup",()=>{isDown=false;relatedDreamsContainer.classList.remove("active")});relatedDreamsContainer.addEventListener("mousemove",(e)=>{if(!isDown)return;e.preventDefault();const x=e.pageX-relatedDreamsContainer.offsetLeft;const walk=(x-startX)*2;relatedDreamsContainer.scrollLeft=scrollLeft-walk})}function initializePageTransitions(){const body=document.body;body.style.opacity="0";body.style.transition="opacity 0.5s ease-in-out";setTimeout(()=>{body.style.opacity="1"},100)}function initializeScrollAnimations(){const observerOptions={root:null,rootMargin:"0px 0px -100px 0px",threshold:0.1};const observer=new IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("animate-in")}})},observerOptions);const animateElements=document.querySelectorAll(".animate-on-scroll");animateElements.forEach(element=>{observer.observe(element)})}function initializeEnhancedHoverEffects(){const hoverElements=document.querySelectorAll(".enhanced-hover");hoverElements.forEach(element=>{element.addEventListener("mouseenter",function(){this.style.transform="translateY(-5px) scale(1.02)";this.style.boxShadow="0 15px 35px rgba(0,0,0,0.4)"});element.addEventListener("mouseleave",function(){this.style.transform="";this.style.boxShadow=""})})}function initializeTouchInteractions(){if("ontouchstart"in window){document.body.classList.add("touch-device");const touchElements=document.querySelectorAll(".hover-scale");touchElements.forEach(element=>{element.addEventListener("touchstart",function(){this.classList.add("touch-active")});element.addEventListener("touchend",function(){setTimeout(()=>{this.classList.remove("touch-active")},150)})})}}function initializeViewportFix(){function setVH(){let vh=window.innerHeight*0.01;document.documentElement.style.setProperty("--vh",`${vh}px`)}setVH();window.addEventListener("resize",setVH);window.addEventListener("orientationchange",()=>{setTimeout(setVH,100)})}function initializePerformanceOptimizations(){if("requestIdleCallback"in window){requestIdleCallback(()=>{const images=document.querySelectorAll("img[data-src]");images.forEach(img=>{img.src=img.dataset.src;img.removeAttribute("data-src")})})}}function toggleMobileMenu(){const mobileMenu=document.querySelector(".mobile-menu");const mobileMenuToggle=document.querySelector(".mobile-menu-toggle");if(mobileMenu.classList.contains("hidden")){openMobileMenu()}else{closeMobileMenu()}}function openMobileMenu(){const mobileMenu=document.querySelector(".mobile-menu");const mobileMenuToggle=document.querySelector(".mobile-menu-toggle");mobileMenu.classList.remove("hidden");mobileMenu.style.opacity="0";mobileMenu.style.transform="translateY(-10px)";setTimeout(()=>{mobileMenu.style.opacity="1";mobileMenu.style.transform="translateY(0)"},10);mobileMenuToggle.innerHTML='<i class="fas fa-times text-xl"></i>';document.body.style.overflow="hidden"}function closeMobileMenu(){const mobileMenu=document.querySelector(".mobile-menu");const mobileMenuToggle=document.querySelector(".mobile-menu-toggle");mobileMenu.style.opacity="0";mobileMenu.style.transform="translateY(-10px)";setTimeout(()=>{mobileMenu.classList.add("hidden")},300);mobileMenuToggle.innerHTML='<i class="fas fa-bars text-xl"></i>';document.body.style.overflow=""}function handleOrientationChange(){setTimeout(()=>{const carousel=document.getElementById("expertCarousel");if(carousel){window.dispatchEvent(new CustomEvent("carouselResize"))}},200)}